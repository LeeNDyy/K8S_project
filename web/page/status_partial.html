{{ $statusMap := .StatusMap }}

<!-- –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã —Å–Ω–∞—á–∞–ª–∞ -->
{{ range $name, $status := $statusMap }}
    {{ if or (not $status.HTTPUp) $status.IsBlocked (not $status.DNSValid) }}
    <div class="column is-one-third">
        <div class="card {{ if not $status.HTTPUp }}status-down blinking{{ else if $status.IsBlocked }}status-blocked blinking{{ else }}status-warning{{ end }}">
            <div class="card-content">
                <div class="media">
                    <div class="media-left">
                        <span class="icon is-large">
                            {{ if not $status.HTTPUp }}üö®
                            {{ else if $status.IsBlocked }}‚õî
                            {{ else if not $status.DNSValid }}‚ö†Ô∏è
                            {{ else }}‚úÖ{{ end }}
                        </span>
                    </div>
                    <div class="media-content">
                        <p class="title is-5">{{ $name }}</p>
                        <p class="subtitle is-6 has-text-grey">{{ $status.URL }}</p>
                    </div>
                </div>
                
                <div class="content">
                    <div class="field is-grouped is-grouped-multiline">
                        <div class="control">
                            <div class="tags has-addons">
                                <span class="tag">HTTP</span>
                                <span class="tag {{ if $status.HTTPUp }}is-success{{ else }}is-danger{{ end }}">
                                    {{ if $status.HTTPUp }}OK ({{ $status.HTTPCode }}){{ else }}ERROR{{ end }}
                                </span>
                            </div>
                        </div>
                        
                        <div class="control">
                            <div class="tags has-addons">
                                <span class="tag">DNS</span>
                                <span class="tag {{ if $status.DNSValid }}is-success{{ else }}is-warning{{ end }}">
                                    {{ if $status.DNSValid }}OK{{ else }}ERROR{{ end }}
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <p><strong>–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞:</strong> {{ $status.ResponseTime }}ms</p>
                    
                    {{ if $status.IsBlocked }}
                    <p class="has-text-weight-bold has-text-danger">‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –†–ö–ù</p>
                    {{ end }}
                    
                    <p class="is-size-7 has-text-grey">
                        –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ: {{ $status.LastChecked.Format "15:04:05" }}
                    </p>
                </div>
            </div>
        </div>
    </div>
    {{ end }}
{{ end }}

<!-- –†–∞–±–æ—Ç–∞—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã -->
{{ range $name, $status := $statusMap }}
    {{ if and $status.HTTPUp $status.DNSValid (not $status.IsBlocked) }}
    <div class="column is-one-third">
        <div class="card status-up">
            <div class="card-content">
                <div class="media">
                    <div class="media-left">
                        <span class="icon is-large">‚úÖ</span>
                    </div>
                    <div class="media-content">
                        <p class="title is-5">{{ $name }}</p>
                        <p class="subtitle is-6 has-text-grey">{{ $status.URL }}</p>
                    </div>
                </div>
                
                <div class="content">
                    <div class="field is-grouped is-grouped-multiline">
                        <div class="control">
                            <div class="tags has-addons">
                                <span class="tag">–°—Ç–∞—Ç—É—Å</span>
                                <span class="tag is-success">–†–∞–±–æ—Ç–∞–µ—Ç</span>
                            </div>
                        </div>
                    </div>
                    
                    <p><strong>–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞:</strong> {{ $status.ResponseTime }}ms</p>
                    
                    <p class="is-size-7 has-text-grey">
                        –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ: {{ $status.LastChecked.Format "15:04:05" }}
                    </p>
                </div>
            </div>
        </div>
    </div>
    {{ end }}
{{ end }}